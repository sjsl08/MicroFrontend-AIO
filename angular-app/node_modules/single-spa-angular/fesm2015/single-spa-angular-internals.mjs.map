{"version":3,"file":"single-spa-angular-internals.mjs","sources":["../../libs/single-spa-angular/internals/src/dom.ts","../../libs/single-spa-angular/internals/src/single-spa-angular-internals.ts"],"sourcesContent":["import { DomElementGetter, BaseSingleSpaAngularOptions } from './types';\n\n// This will be provided through Terser global definitions by Angular CLI. This will\n// help to tree-shake away the code unneeded for production bundles.\ndeclare const ngDevMode: boolean;\n\nexport function getContainerElementAndSetTemplate<T extends BaseSingleSpaAngularOptions>(\n  options: T,\n  props: any,\n): HTMLElement {\n  const domElementGetter = chooseDomElementGetter(options, props);\n\n  if ((typeof ngDevMode === 'undefined' || ngDevMode) && !domElementGetter) {\n    throw Error(\n      `Cannot mount angular application '${\n        props.name || props.appName\n      }' without a domElementGetter provided either as an opt or a prop`,\n    );\n  }\n\n  const containerElement = getContainerElement(domElementGetter, props);\n  containerElement.innerHTML = options.template;\n  return containerElement;\n}\n\nfunction getContainerElement(domElementGetter: DomElementGetter, props: any): never | HTMLElement {\n  const element = domElementGetter(props);\n\n  if ((typeof ngDevMode === 'undefined' || ngDevMode) && !element) {\n    throw Error('domElementGetter did not return a valid dom element');\n  }\n\n  return element;\n}\n\nfunction chooseDomElementGetter<T extends BaseSingleSpaAngularOptions>(\n  opts: T,\n  props: any,\n): DomElementGetter {\n  props = props?.customProps ?? props;\n\n  if (props.domElement) {\n    return () => props.domElement;\n  } else if (props.domElementGetter) {\n    return props.domElementGetter;\n  } else if (opts.domElementGetter) {\n    return opts.domElementGetter;\n  } else {\n    return defaultDomElementGetter(props.name);\n  }\n}\n\nfunction defaultDomElementGetter(name: string): DomElementGetter {\n  return function getDefaultDomElement() {\n    const id = `single-spa-application:${name}`;\n    let domElement: HTMLElement | null = document.getElementById(id);\n\n    if (!domElement) {\n      domElement = document.createElement('div');\n      domElement.id = id;\n      document.body.appendChild(domElement);\n    }\n\n    return domElement;\n  };\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"AAMgB,SAAA,iCAAiC,CAC/C,OAAU,EACV,KAAU,EAAA;IAEV,MAAM,gBAAgB,GAAG,sBAAsB,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAEhE,IAAI,CAAC,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,KAAK,CAAC,gBAAgB,EAAE;AACxE,QAAA,MAAM,KAAK,CACT,CACE,kCAAA,EAAA,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,OACtB,CAAkE,gEAAA,CAAA,CACnE,CAAC;AACH,KAAA;IAED,MAAM,gBAAgB,GAAG,mBAAmB,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;AACtE,IAAA,gBAAgB,CAAC,SAAS,GAAG,OAAO,CAAC,QAAQ,CAAC;AAC9C,IAAA,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AAED,SAAS,mBAAmB,CAAC,gBAAkC,EAAE,KAAU,EAAA;AACzE,IAAA,MAAM,OAAO,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC;IAExC,IAAI,CAAC,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,KAAK,CAAC,OAAO,EAAE;AAC/D,QAAA,MAAM,KAAK,CAAC,qDAAqD,CAAC,CAAC;AACpE,KAAA;AAED,IAAA,OAAO,OAAO,CAAC;AACjB,CAAC;AAED,SAAS,sBAAsB,CAC7B,IAAO,EACP,KAAU,EAAA;;IAEV,KAAK,GAAG,CAAA,EAAA,GAAA,KAAK,KAAL,IAAA,IAAA,KAAK,KAAL,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,KAAK,CAAE,WAAW,MAAI,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,KAAK,CAAC;IAEpC,IAAI,KAAK,CAAC,UAAU,EAAE;AACpB,QAAA,OAAO,MAAM,KAAK,CAAC,UAAU,CAAC;AAC/B,KAAA;SAAM,IAAI,KAAK,CAAC,gBAAgB,EAAE;QACjC,OAAO,KAAK,CAAC,gBAAgB,CAAC;AAC/B,KAAA;SAAM,IAAI,IAAI,CAAC,gBAAgB,EAAE;QAChC,OAAO,IAAI,CAAC,gBAAgB,CAAC;AAC9B,KAAA;AAAM,SAAA;AACL,QAAA,OAAO,uBAAuB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAC5C,KAAA;AACH,CAAC;AAED,SAAS,uBAAuB,CAAC,IAAY,EAAA;AAC3C,IAAA,OAAO,SAAS,oBAAoB,GAAA;AAClC,QAAA,MAAM,EAAE,GAAG,CAA0B,uBAAA,EAAA,IAAI,EAAE,CAAC;QAC5C,IAAI,UAAU,GAAuB,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;QAEjE,IAAI,CAAC,UAAU,EAAE;AACf,YAAA,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;AAC3C,YAAA,UAAU,CAAC,EAAE,GAAG,EAAE,CAAC;AACnB,YAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;AACvC,SAAA;AAED,QAAA,OAAO,UAAU,CAAC;AACpB,KAAC,CAAC;AACJ;;ACjEA;;AAEG;;;;"}